<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Compras / Serviços</title>

  <style>
    body {
      background: #000;
      color: #00eaff;
      font-family: Arial, sans-serif;
      margin: 0;
    }

    header {
      background: #e5e5e5;
      color: #000;
      padding: 15px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .container {
      max-width: 1200px;
      margin: 40px auto;
      border: 2px solid #00eaff;
      border-radius: 20px;
      padding: 30px;
    }

    h2 {
      text-align: center;
      color: #ff6a00;
      margin-bottom: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 12px;
      border-bottom: 1px solid #004b50;
      text-align: left;
    }

    th {
      color: #00eaff;
      font-size: 14px;
    }

    input {
      background: #111;
      border: 1px solid #00eaff;
      color: #00eaff;
      padding: 6px;
      border-radius: 8px;
      width: 100%;
    }

    button {
      padding: 8px 16px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-green { background: #00c853; color: #000; }
    .btn-blue { background: #2196f3; color: #000; }

    .badge-finalizado {
      padding: 6px 14px;
      background: #1e7f43;
      color: #fff;
      border-radius: 20px;
      font-weight: bold;
      font-size: 12px;
      display: inline-block;
    }

    .filtros button {
      margin-right: 10px;
      background: #111;
      color: #00eaff;
      border: 1px solid #00eaff;
    }

    .filtros .ativo {
      background: #00c853;
      color: #000;
    }
  </style>
</head>

<body>

<header>
  <strong>TMG Racing</strong>
  <span>Compras / Serviços</span>
</header>

<div class="container">
  <h2>Compras Autorizadas</h2>

  <div class="filtros">
    <button class="ativo">Todos</button>
    <button>Comprar</button>
    <button>Dar entrada</button>
    <button>Finalizado</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Solicitante</th>
        <th>Item</th>
        <th>Fornecedor</th>
        <th>Valor</th>
        <th>Previsão</th>
        <th>Ação</th>
      </tr>
    </thead>
    <tbody id="listaCompras"></tbody>
  </table>
</div>

<script>
  const compras = JSON.parse(localStorage.getItem("compras")) || [];

  function salvar() {
    localStorage.setItem("compras", JSON.stringify(compras));
    render();
  }

  function comprar(id) {
    const item = compras.find(c => c.id === id);
    item.status = "purchased";
    salvar();
  }

  function darEntrada(id) {
    const item = compras.find(c => c.id === id);
    item.status = "finalizado";
    salvar();
  }

  function renderAcao(item) {
    if (item.status === "authorized") {
      return `<button class="btn-green" onclick="comprar('${item.id}')">Comprar</button>`;
    }

    if (item.status === "purchased") {
      return `<button class="btn-blue" onclick="darEntrada('${item.id}')">Dar entrada</button>`;
    }

    if (item.status === "finalizado" || item.status === "received") {
      return `<span class="badge-finalizado">Finalizado</span>`;
    }

    return "-";
  }

  function render() {
    const tbody = document.getElementById("listaCompras");
    tbody.innerHTML = "";

    compras.forEach(item => {
      tbody.innerHTML += `
        <tr>
          <td>${item.solicitante || "-"}</td>
          <td>${item.item}</td>
          <td><input value="${item.fornecedor || ""}"></td>
          <td><input value="${item.valor || ""}"></td>
          <td><input type="date" value="${item.previsao || ""}"></td>
          <td>${renderAcao(item)}</td>
        </tr>
      `;
    });
  }

  render();
</script>

</body>
</html>
