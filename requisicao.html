<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Nova Requisição</title>
<style>
  body{ font-family:sans-serif; background:#0a0a0a; color:#00e5ff; padding:20px; }
  .card{ max-width:400px; margin:auto; background:#111; padding:20px; border-radius:10px; border:1px solid var(--c-cyan); }
  input, select{ width:100%; padding:10px; margin:8px 0; background:#000; color:#fff; border:1px solid #333; }
  button{ width:100%; padding:12px; background:#00e5ff; color:#000; border:none; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>
  <div class="card">
    <h3>Solicitar Material</h3>
    <input type="text" id="member" placeholder="Seu Nome">
    
    <label>Item (Sugestões aparecem ao digitar):</label>
    <input type="text" id="item" list="dlItems" placeholder="O que você precisa?">
    <datalist id="dlItems"></datalist>

    <input type="text" id="cost" placeholder="Centro de Custo (Ex: Oficina)">
    <button onclick="send()">ENVIAR SOLICITAÇÃO</button>
  </div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // CONFIGURAÇÃO FIREBASE (Mantenha as suas chaves aqui)
  const firebaseConfig = { /* COLE SUAS CHAVES AQUI */ };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Carregar sugestões do histórico
  db.ref("purchaseRequests").limitToLast(50).once("value", snap => {
    const items = [];
    snap.forEach(c => { if(c.val().item) items.push(c.val().item) });
    const unique = [...new Set(items)];
    document.getElementById("dlItems").innerHTML = unique.map(i => `<option value="${i}">`).join("");
  });

  function send(){
    const member = document.getElementById("member").value;
    const item = document.getElementById("item").value;
    const cost = document.getElementById("cost").value;

    if(!member || !item) return alert("Preencha nome e item!");

    db.ref("purchaseRequests").push({
      requestedBy: member, // Padronizado
      item: item,
      cost: cost,
      status: "requested",
      ts: Date.now()
    }).then(() => {
      alert("Enviado com sucesso!");
      document.getElementById("item").value = "";
    });
  }
</script>
</body>
</html>
