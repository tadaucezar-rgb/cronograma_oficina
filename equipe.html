<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Equipe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:'Orbitron',Arial,sans-serif;background:radial-gradient(circle at top,#0a0a0a,#000);color:#00e5ff;}
header{padding:14px;background:linear-gradient(90deg,#bdbdbd,#e0e0e0,#bdbdbd);color:#000;font-weight:900;text-align:center;position:sticky;top:0;z-index:5;}
.container{padding:14px;max-width:720px;margin:auto;}
.card{background:rgba(0,0,0,.78);border-radius:18px;padding:14px;border:2px solid rgba(0,229,255,.22);box-shadow:0 0 26px rgba(0,229,255,.22);margin-bottom:14px;}
h2{margin:0;color:#ff3d00;text-align:center;}
input{width:100%;padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.08);color:#fff;font-family:'Orbitron';margin-top:10px;}
button{padding:10px 12px;border-radius:12px;border:none;font-family:'Orbitron';font-weight:900;cursor:pointer;}
.btn-main{background:linear-gradient(90deg,#00c853,#64dd17);color:#000;width:100%;margin-top:10px;}
.member{margin-top:14px;}
.name{font-size:1.1rem;font-weight:800;}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
.btn-qr{background:#ffeb3b;color:#000;}
.btn-req{background:linear-gradient(90deg,#00c853,#64dd17);color:#000;}
.btn-copy{background:rgba(255,255,255,.15);color:#fff;}
.btn-del{background:#ff1744;color:#fff;}
.small{font-size:.75rem;opacity:.85;word-break:break-all;margin-top:6px;}
</style>
</head>

<body>

<header>
  <h2>EQUIPE</h2>
</header>

<div class="container">
  <!-- Atalho topo -->
  <button class="btn-main" onclick="openReqTop()">Nova Requisi√ß√£o</button>

  <!-- Cadastro -->
  <input id="name" placeholder="Nome do membro">
  <button class="btn-main" onclick="add()">Cadastrar membro</button>

  <div id="list"></div>
</div>

<script>
const KEY="tmg_team";

function load(){
  const list=document.getElementById("list");
  list.innerHTML="";
  const team=JSON.parse(localStorage.getItem(KEY)||"[]");
  team.forEach((n,i)=>{
    const link = location.origin + location.pathname.replace("equipe","requisicao") + "?u=" + encodeURIComponent(n);
    const div=document.createElement("div");
    div.className="card member";
    div.innerHTML=`
      <div class="name">${n}</div>
      <div class="small">${link}</div>
      <div class="actions">
        <button class="btn-qr" onclick="alert('Use este link no QR:\n${link}')">QR</button>
        <button class="btn-req" onclick="openReq('${n}')">Requisi√ß√£o</button>
        <button class="btn-copy" onclick="copy('${link}')">Copiar</button>
        <button class="btn-del" onclick="del(${i})">üóëÔ∏è</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function add(){
  const n=document.getElementById("name").value.trim();
  if(!n) return;
  const team=JSON.parse(localStorage.getItem(KEY)||"[]");
  team.push(n);
  localStorage.setItem(KEY,JSON.stringify(team));
  document.getElementById("name").value="";
  load();
}

function del(i){
  const team=JSON.parse(localStorage.getItem(KEY)||"[]");
  team.splice(i,1);
  localStorage.setItem(KEY,JSON.stringify(team));
  load();
}

function copy(t){ navigator.clipboard.writeText(t); }

function openReq(name){
  localStorage.setItem("tmg_member_name",name);
  window.open("requisicao.html?u="+encodeURIComponent(name),"_blank");
}

function openReqTop(){
  const last=localStorage.getItem("tmg_member_name");
  if(last){
    window.open("requisicao.html?u="+encodeURIComponent(last),"_blank");
  }else{
    window.open("requisicao.html","_blank");
  }
}

load();
</script>
</body>
</html>
