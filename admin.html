<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Admin - TMG Painel</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
  :root{ --c-cyan:#00e5ff; --c-orange:#ff3d00; --c-green:#64dd17; --bg1:#0a0a0a; --bg2:#000; }
  body{ margin:0; font-family:'Orbitron',sans-serif; background:radial-gradient(circle at top,var(--bg1),var(--bg2)); color:var(--c-cyan); }
  .container{ padding:20px; max-width:800px; margin:auto; }
  .card{ background:rgba(0,0,0,0.7); border:1px solid var(--c-cyan); border-radius:15px; padding:20px; margin-bottom:20px; }
  .input{ width:100%; padding:10px; margin:10px 0; background:#111; border:1px solid #333; color:#fff; border-radius:5px; font-family:inherit; }
  .btn{ width:100%; padding:12px; background:var(--c-cyan); color:#000; border:none; border-radius:5px; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>
<div class="container">
  <h2>PAINEL ADMINISTRATIVO</h2>
  
  <div class="card">
    <h3>Nova Tarefa</h3>
    <label>Responsável:</label>
    <select id="selMember" class="input"></select>
    
    <label>Descrição da Tarefa:</label>
    <input type="text" id="taskName" class="input" placeholder="Ex: Ajustar suspensão">
    
    <label>Prioridade:</label>
    <select id="taskPrio" class="input">
      <option value="1">BAIXA</option>
      <option value="2">MÉDIA</option>
      <option value="3">ALTA</option>
    </select>
    <button class="btn" onclick="addTask()">CRIAR TAREFA</button>
  </div>
</div>

<script>
  // CONFIGURAÇÃO FIREBASE (Mantenha as suas chaves aqui)
  const firebaseConfig = {  apiKey:"AIzaSyBPz4aSee-kQY5hwlyzEw_4Jv3gGKL9iHY",
  authDomain:"tmg-painel.firebaseapp.com",
  databaseURL:"https://tmg-painel-default-rtdb.firebaseio.com",
  projectId:"tmg-painel",
  storageBucket:"tmg-painel.firebasestorage.app",
  messagingSenderId:"877912378151",
  appId:"1:877912378151:web:88af3a4f8f551acd603702"
 };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Carregar Membros para o Select
  db.ref("people").on("value", snap => {
    const sel = document.getElementById("selMember");
    sel.innerHTML = '<option value="">Selecione um membro...</option>';
    snap.forEach(child => {
      const p = child.val();
      sel.innerHTML += `<option value="${p.name}">${p.name}</option>`;
    });
  });

  function addTask(){
    const member = document.getElementById("selMember").value;
    const name = document.getElementById("taskName").value;
    const prio = parseInt(document.getElementById("taskPrio").value);

    if(!member || !name) return alert("Preencha todos os campos!");

    db.ref("tasks").push({
      member: member,
      name: name,
      prio: prio,
      status: "todo",
      ts: Date.now()
    }).then(() => {
      alert("Tarefa enviada!");
      document.getElementById("taskName").value = "";
    });
  }
</script>
</body>
</html>

